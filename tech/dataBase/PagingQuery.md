# Paging Query

í˜ì´ì§• ì¿¼ë¦¬(Paging Query)ëŠ” ì „ì²´ ë°ì´í„°ë¥¼ ë¶€ë¶„ì ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê±°ë‚˜ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. ë°ì´í„°ë¥¼ ìƒëŒ€ì ìœ¼ë¡œ ì‘ì€ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì— ë°ì´í„°ë² ì´ìŠ¤ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¦¬ì†ŒìŠ¤ ì‚¬ìš© íš¨ìœ¨ì´ ì¦ê°€í•˜ë©°, ë¡œì§ ì²˜ë¦¬ ì‹œê°„ì„ ë‹¨ì¶• ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. MySQLì—ì„œ í˜ì´ì§• ì¿¼ë¦¬ëŠ” ì¼ë°˜ì ìœ¼ë¡œ LIMIT, OFFSET êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ì‘ì„±í•©ë‹ˆë‹¤.

```sql
select *
from subscribe
limit 500
offset 0;
```

## ğŸ¤·ğŸ»â€â™‚ï¸ LIMIT, OFFSET ë°©ì‹ í˜ì´ì§• ì¿¼ë¦¬ì˜ ë‹¨ì ì€ ë¬´ì—‡ì´ê³ , ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‚˜ìš”?

LIMIT, OFFSET ë°©ì‹ì˜ í˜ì´ì§• ì¿¼ë¦¬ëŠ” ë’¤ì— ìˆëŠ” ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ë¡ ì ì  ì‘ë‹µ ì‹œê°„ì´ ê¸¸ì–´ì§ˆ ìˆ˜ ìˆëŠ”ë°ìš”. ì™œëƒí•˜ë©´, DBMSëŠ” ì§€ì •ëœ OFFSET ìˆ˜ë§Œí¼ ëª¨ë“  ë ˆì½”ë“œë¥¼ ì½ì€ ì´í›„ì— ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ OFFSETì„ í™œìš©í•˜ì§€ ì•ŠëŠ” í˜ì´ì§• ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ëŒ€í‘œì ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì€ í…Œì´ë¸”ì´ ìˆë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤.

```sql
create table subscribe (
   id int not null auto_increment,
   deleted_at datetime null,
   created_at datetime not null,
   primary key(id),
   key idx_deleted_at_id(deleted_at, id)
);
```

ì´ë•Œ, íŠ¹ì • ê¸°ê°„ ë™ì•ˆ êµ¬ë…ì„ í•´ì œí•œ ì‚¬ìš©ìë¥¼ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```sql
select *
from subscribe
where deleted_at >= ? and deleted_at < ?
```

OFFSETì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í˜ì´ì§•ì€ ì´ì „ í˜ì´ì§€ì˜ ë§ˆì§€ë§‰ ë°ì´í„° ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ìŒ í˜ì´ì§€ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤. ì´ë•Œ, ìƒí™©ì— ë”°ë¼ì„œ ì²« í˜ì´ì§€ ì¡°íšŒ ì¿¼ë¦¬ì™€ N íšŒì°¨ ì¿¼ë¦¬ì˜ ëª¨ì–‘ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ ì˜ˆì œì—ì„œ ì²« í˜ì´ì§€ë¥¼ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```sql
select *
from subscribe
where deleted_at >= ? and deleted_at < ?
order by deleted_at, id
limit 10;
```

ê·¸ë¦¬ê³  ì²« í˜ì´ì§€ ì´í›„ì˜ í˜ì´ì§€ëŠ” ì´ì „ì— ì¡°íšŒëœ í˜ì´ì§€ì˜ ë§ˆì§€ë§‰ ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ìŒ í˜ì´ì§€ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤. ë§Œì•½, ì´ì „ í˜ì´ì§€ì˜ ë§ˆì§€ë§‰ ê°’ì˜ deleted_atì´ '2024-01-01'ì´ê³ , ì‹ë³„ìê°€ 78ì´ë¼ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì¿¼ë¦¬ê°€ ì‘ì„±ë©ë‹ˆë‹¤.

```sql
select *
from subscribe
where
   # deleted_atì´ ê°™ì€ ì¼€ì´ìŠ¤ë¥¼ ëŒ€ì‘
   (deleted_at = '2024-01-01 00:00:00' and id > 78) or
   # ë§ˆì§€ë§‰ ë°ì´í„° ì´í›„ ë°ì´í„° ì¡°íšŒ
   (deleted_at > '2024-01-01 00:00:00' and deleted_at < ?)
order by deleted_at, id
limit 10;
```