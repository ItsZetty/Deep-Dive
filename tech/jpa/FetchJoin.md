# Fetch Join
Fetch Joinì€ JPAì—ì„œ ì—°ê´€ëœ ì—”í‹°í‹°ë‚˜ ì»¬ë ‰ì…˜ì„ í•œ ë²ˆì˜ SQLë¡œ ì¦‰ì‹œ í•¨ê»˜ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” JPQLì˜ íŠ¹ë³„í•œ JOIN ë°©ì‹ìž…ë‹ˆë‹¤.

```sql 
select p from Parent p join fetch p.children
```

ì´ë ‡ê²Œ ì“°ë©´ Parentì™€ ì—°ê´€ëœ Childrenì„ í•œ ì¿¼ë¦¬ë¡œ ë¯¸ë¦¬ ë‹¹ê²¨ì™€(N+1 ë¬¸ì œ ì˜ˆë°©), ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì ìž¬í•´ ë‘¡ë‹ˆë‹¤.

## ðŸ¤·ðŸ»â€â™‚ï¸ ê·¸ëŸ¼ LAZYì™€ Fetch Joinì˜ ë™ìž‘ ì°¨ì´ëŠ” ì–´ë–»ê²Œ ë˜ë‚˜ìš”?
LAZYëŠ” ì¡°íšŒ ì‹œì ì— ì¼ë‹¨ Parentë§Œ ì¡°íšŒë¥¼ í•˜ê³  Childrenì€ í”„ë¡ì‹œë¡œ ì„¸íŒ…í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  Children í•„ë“œ ì ‘ê·¼í•  ë•Œë§ˆë‹¤ N+1 ì¿¼ë¦¬ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤. 

í•˜ì§€ë§Œ Fetch Joinì€ Parentë¥¼ ì¡°íšŒí•  ë•Œ, SQL ì¡°ì¸ì„ í•´ì„œ Childrenê¹Œì§€ í•œ ë²ˆì— ì¡°íšŒë¥¼ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì¶”í›„ Children í•„ë“œë¥¼ ì ‘ê·¼í•˜ë”ë¼ë„ ì´ë¯¸ ì¡°íšŒëœ ìƒíƒœì´ë¯€ë¡œ ì¶”ê°€ ì¿¼ë¦¬ëŠ” ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ì¦‰, Fetch Joinì„ ì“°ë©´ Parentë¥¼ ê°€ì ¸ì˜¬ ë•Œ Childrenì„ ë¯¸ë¦¬ ëŒê³  ì˜¤ë©°, LAZYë¥¼ ì“°ë©´ Childrenì€ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ì¿¼ë¦¬ë¥¼ ë‚ ë¦½ë‹ˆë‹¤.

## ðŸ¤·ðŸ»â€â™‚ï¸ ê·¸ëŸ¼ EAGERì™€ Fetch Joinì˜ ë™ìž‘ì´ ë˜‘ê°™ì€ ê±° ì•„ë‹ˆì•¼?
EAGERì™€ Fetch Joinì€ ëª¨ë‘ ì—°ê´€ ì—”í‹°í‹°ë¥¼ í•œ ë²ˆì— ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ì´ì§€ë§Œ, ë™ìž‘ ë°©ì‹ê³¼ ìœ ì—°ì„±ì—ì„œ í° ì°¨ì´ê°€ ìžˆìŠµë‹ˆë‹¤.

EAGERëŠ” ì—”í‹°í‹°ì— `fetch = FetchType.EAGER`ë¥¼ ì§€ì •í•´ ë‘ë©´, ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•  ë•Œë§ˆë‹¤ ì—°ê´€ ì—”í‹°í‹°ë¥¼ í•­ìƒ ì¦‰ì‹œ í•¨ê»˜ ì¡°íšŒí•©ë‹ˆë‹¤. 

ì´ ë°©ì‹ì€ ê°œë°œìžê°€ ë³„ë„ë¡œ ì»¨íŠ¸ë¡¤í•  ìˆ˜ ìžˆëŠ” ì—¬ì§€ê°€ ì ê³ , ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ë¶ˆí•„ìš”í•œ ë°ì´í„°ë¥¼ ë„ˆë¬´ ì¼ì° ì¡°íšŒí•˜ê²Œ ë˜ë¯€ë¡œ ì„±ëŠ¥ ë¬¸ì œê°€ ìƒê¸°ê¸° ì‰½ìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ Fetch Joinì€ JPQLì—ì„œ `JOIN FETCH`ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•´, ì›í•˜ëŠ” ì¡°íšŒ ì¿¼ë¦¬ì—ì„œë§Œ ì—°ê´€ ì—”í‹°í‹°ë¥¼ í•¨ê»˜ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ìž…ë‹ˆë‹¤. 

í˜¸ì¶œ ì‹œì ê³¼ ì¡°íšŒ ëŒ€ìƒì„ ìœ ì—°í•˜ê²Œ ì¡°ì ˆí•  ìˆ˜ ìžˆì–´, ê¼­ í•„ìš”í•  ë•Œë§Œ ì¡°ì¸ì„ ìˆ˜í–‰í•˜ê³  ì„±ëŠ¥ì„ ìµœì í™”í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. 

## ðŸ¤·ðŸ»â€â™‚ï¸ Fetch Joinì˜ ë™ìž‘ ë°©ì‹ì— ëŒ€í•´ ìžì„¸ížˆ ì•Œê³  ì‹¶ìŠµë‹ˆë‹¤.
Fetch Joinì„ ì‚¬ìš©í•˜ë©´ JPAê°€ ì¡°ì¸ì„ ìˆ˜í–‰í•˜ê³ , ê²°ê³¼ë¥¼ íŒŒì‹±í•´ì„œ ì—°ê´€ ì—”í‹°í‹°ë¥¼ ë¶€ëª¨ ì—”í‹°í‹° ì•ˆì— ì±„ì›ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì—°ê´€ ì—”í‹°í‹°ëŠ” ì´ë¯¸ ì˜ì† ìƒíƒœì´ë¯€ë¡œ ì´í›„ í˜¸ì¶œí•  ë•Œ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.

## ðŸ¤·ðŸ»â€â™‚ï¸ ê·¸ëŸ¼ Fetch Joinì´ ì¢‹ì€ ê¸°ëŠ¥ì¸ë°, ì£¼ì˜í•´ì•¼ í•  ë¶€ë¶„ì´ ìžˆì„ê¹Œìš”?
ë¨¼ì € Fetch Joinì˜ ìž¥ì ì€ ìœ„ì—ì„œë„ ì­‰ ë§í•´ì™”ì§€ë§Œ, N+1 ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  íŠ¸ëžœìž­ì…˜ ë‚´ë¶€ì—ì„œ ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ ë¯¸ë¦¬ ì¡°íšŒí•˜ê¸° ë•Œë¬¸ì— ì§€ì—° ì´ˆê¸°í™” ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ ì•„ëž˜ì™€ ê°™ì€ ë¬¸ì œì ë„ ë¶„ëª…ížˆ ìžˆìŠµë‹ˆë‹¤.

- `@OneToMany` ì»¬ë ‰ì…˜ Fetch Join + íŽ˜ì´ì§•(setFirstResult, setMaxResults) -> DB ë ˆë²¨ íŽ˜ì´ì§• ë¶ˆê°€ (ì¤‘ë³µ Row ë•Œë¬¸)
- Fetch Joinì€ í•œ ì¿¼ë¦¬ì—ì„œ í•œ ë²ˆë§Œ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ” ê²½ìš°ê°€ ë§ŽìŒ(Hibernate í•œê³„)
- Fetch Join ë‚¨ë°œí•˜ë©´ ì¡°ì¸ ìˆ˜ ì¦ê°€ -> ì¿¼ë¦¬ ë³µìž¡, ì„±ëŠ¥ ì €í•˜