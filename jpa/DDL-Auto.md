# DDL Auto

ddl-auto 옵션은 스프링 부트 애플리케이션에서 `Hibernate`와 같은 JPA 구현체를 사용할 때 데이터베이스 스키마 관리를 제어하는 설정입니다. 이 옵션은 `application.properties` 또는 `application.yml` 파일에서 설정할 수 있으며, 다양한 값에 따라 데이터베이스 스키마에 대해 다른 동작을 수행합니다.

<details>
<summary>Hibernate란?</summary>

**Hibernate**는 Java에서 가장 널리 사용되는 **ORM(Object-Relational Mapping) 프레임워크**입니다.

> ORM이란?
> <br> **Object**: Java 객체
> <br> **Relational**: 관계형 데이터베이스 
> <br> **Mapping**: 객체와 DB 테이블을 연결

즉, Hibernate는 **JPA 스펙을 구현한 가장 인기 있는 ORM 프레임워크**로, Spring Data JPA와 함께 사용되어 Java 개발에서 데이터베이스 접근을 단순화합니다.

</details>

## 🤷🏻‍♂️ 그럼 어떤 옵션들이 있나요?

### 1. none
- **동작**: 데이터베이스 스키마와 관련된 어떠한 작업도 수행하지 않습니다.
- **사용 시기**: 데이터베이스 스키마를 수동으로 관리하고 싶을 때 사용합니다.
- **환경**: 프로덕션 환경에서 주로 사용합니다.

### 2. validate
- **동작**: 애플리케이션 시작 시 엔티티 매핑이 데이터베이스 스키마와 일치하는지 검증합니다.
- **특징**: 스키마 변경은 수행하지 않습니다.
- **사용 시기**: 프로덕션 환경에서 엔티티와 데이터베이스 스키마가 일치하는지 확인하고 싶을 때 사용합니다.

### 3. update
- **동작**: 엔티티 매핑과 데이터베이스 스키마를 비교하여 필요한 경우 스키마를 업데이트합니다.
- **특징**: 기존 데이터는 유지되며, 새로운 엔티티나 변경된 필드는 스키마에 반영됩니다.
- **사용 시기**: 엔티티에 변경이 발생할 때 자동으로 스키마를 업데이트하고 싶을 때 사용합니다.
- **주의**: 프로덕션 환경에서는 예기치 않은 스키마 변경을 방지하기 위해 주의가 필요합니다.

### 4. create
- **동작**: 애플리케이션 시작 시 기존 스키마를 삭제하고 새로 생성합니다.
- **특징**: 데이터가 모두 삭제되며 엔티티 매핑을 기반으로 새로운 스키마가 생성됩니다.
- **사용 시기**: 개발 초기에 빈 데이터베이스 스키마를 반복적으로 생성해야 할 때 사용합니다.
- **주의**: 기존 데이터가 모두 삭제되므로 프로덕션 환경에서는 사용하지 않습니다.

### 5. create-drop
- **동작**: create와 유사하지만 애플리케이션 종료 시 스키마를 삭제합니다.
- **특징**: 테스트 환경에서 일시적인 데이터베이스 스키마가 필요한 경우 유용합니다.
- **사용 시기**: 매 테스트 실행 시마다 깨끗한 데이터베이스 상태를 유지하고자 할 때 사용합니다.
- **주의**: 프로덕션 환경에서는 사용하지 않습니다.

## 🤷🏻‍♂️ 운영 환경에서는 어떻게 스키마를 변경해야 하나요?
스키마 변경이 필요할 때는 적절한 데이터베이스 마이그레이션 도구(Flyway, Liquibase 등)를 사용하여 제어된 방식으로 스키마를 관리하거나, 사용자가 없는 새벽에 스키마 변경 작업을 수동으로 진행하는 것이 더욱 안전할 수 있습니다.